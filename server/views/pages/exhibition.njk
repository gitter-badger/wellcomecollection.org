{% extends 'layout/default.njk' %}

{% block pageMeta %}
  {% set metaContent = {
    type: 'website',
    title: exhibition.title,
    image: exhibition.featuredImage.contentUrl,
    url: pageConfig.canonicalUri
  } %}
  {% component 'open-graph', { pageConfig: pageConfig, metaContent: metaContent } %}
  {% component 'twitter-card', { pageConfig: pageConfig, metaContent: metaContent } %}
  {# <meta name="description" content="{{ exhibition.description | safe | striptags }}" /> #}
{% endblock %}

{% block body %}
<script type="application/ld+json">
  {{ exhibition | jsonLd('contentLd') | safe }}
</script>

<article itemscope itemtype="http://schema.org/ExhibitionEvent">
  <div class="row relative">
    {% block tags %}{% endblock %}
    {% componentV2 'image', exhibition.featuredImage, {}, {lazyload: true} %}
    {% component 'wobbly-edge', {background: 'white'} %}
  </div>
  <div class="row {{ {s:4} | spacingClasses({padding: ['top', 'bottom']}) }}">
    <div class="container">
      <div class="grid">
        <div class="{{ {s:12, m:10, shiftM:1, l:12, xl:12} | gridClasses }}">
          <div class="flex flex--v-center font-elf-green {{ {s:'HNM4'} | fontClasses }}">
            {% icon 'other/ticket', null, ['icon--2x', 'icon--teal'] %}
            <strong class="caps {{ {s: 2} | spacingClasses({margin: ['left']}) }} {{ {s: 6} | spacingClasses({margin: ['right']}) }}">Free</strong>
            <strong>{{ {start: exhibition.start, end: exhibition.end} | formatDateRangeWithMessage }}</strong>
          </div>
          <h1 class="{{ {s:'WB4', xl:'WB3'} | fontClasses }}">{{ exhibition.title }}</h1>
          <span class="{{ {s:'HNM3'} | fontClasses }}">
            <time datetime="{{ exhibition.start }}">{{ exhibition.start | formatDate }}</time> &ndash; <time datetime="{{ exhibition.end }}">{{ exhibition.end | formatDate }}</time>
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="row {{ {s:2} | spacingClasses({padding: ['bottom']}) }}">
    <div class="container">
      <div class="grid">
        <div class="{{ {s:12, m:10, shiftM:1, l:7, xl:7} | gridClasses }} {{ {s:'HNL3', m:'HNL2'} | fontClasses}} {{ {s:4} | spacingClasses({margin: ['bottom']}) }}">
          {% block exhibitionDescription %}
            {{ exhibition.text.value | safe }}
          {% endblock %}
          {# TODO - make this dynamic; temporarily hard coded for first exhibition #}
          {% componentV2 'promo',
            {
              "contentType": "gallery",
              "length": 10,
              "image": {
                "type": "picture",
                "contentUrl": "https://iiif.wellcomecollection.org/image/prismic:806c7afb0573c7184b2049de218e5d552b33436a_cgdsyl1---smoking-is-slow-motion-suicide-biman-mullick-cleanair.jpg/full/600,/0/default.jpg",
                "width": 600,
                "height": 333
              },
              "title": "Can graphic design save your life?",
              "url": "/",
              "description": "Aenean quam lectus, euismod nec commodo eu, sollicitudin et risus. Curabitur in porttitor mauris. Sed porta dolor eget semper scelerisque.",
              "modifiers": [
                "underlined"
              ]
            },
          {}, {sizes: '(min-width: 1420px) 698px, (min-width: 960px) 50.23vw, (min-width: 600px) calc(83.24vw - 73px), calc(100vw - 36px)'} %}

        </div>
        <div class="{{ {s:12, m:10, shiftM:1, l:5, xl:5} | gridClasses }}">
          <div class="drawer js-show-hide"
            data-track-action="opening-times-drawer">
            <button class="plain-button no-padding pointer js-show-hide-trigger font-elf-green {{ {s:4} | spacingClasses({margin: ['bottom']}) }} {{ {s:'HNM5'} | fontClasses }}">{% icon 'actions/more-2', null, ['icon--elf-green'] %}Opening times</button>
            <div class="drawer__body js-show-hide-drawer">
              {% componentV2 'opening-hours', {places: pageConfig.openingHours}, {'light': true, 'compressed': true} %}
            </div>
          </div>
          <hr class="divider divider--keyline divider--pumice {{ {s:2} | spacingClasses({margin: ['bottom']}) }}" />
          {% block accessStatements %}
            <div class="flex {{ {s:1} | spacingClasses({margin: ['top', 'bottom']}) }} {{ {s:'HNL4'} | fontClasses}}">
              <div class="{{ {s:1} | spacingClasses({margin:['right']}) }}">{% icon 'a11y/a11y' %}</div>
              <p class="no-margin">Step-free access is available to all floors of the building</p>
            </div>
            <div class="flex {{ {s:1} | spacingClasses({margin: ['top', 'bottom']}) }} {{ {s:'HNL4'} | fontClasses}}">
              <div class="{{ {s:1} | spacingClasses({margin:['right']}) }}">{% icon 'a11y/a11y_visual' %}</div>
              <p>Magnifying glasses and sheets are available to borrow</p>
            </div>
            {% for statement in exhibition.accessStatements %}
              <div class="flex {{ {s:1} | spacingClasses({margin: ['top', 'bottom']}) }} {{ {s:'HNL4'} | fontClasses}}">
                <div class="{{ {s:1} | spacingClasses({margin:['right']}) }}">{% icon statement.value.slug | getA11yIcon %}</div>
                {{ statement.value.data.description | prismicAsHtml | safe  }}
              </div>
            {% endfor %}

            <p class="{{ {s:'HNL4'} | fontClasses}}">
              <a class="plain-link font-elf-green" href="https://wellcomecollection.org/visit-us/accessibility" class="font-elf-green">Find out more about accessiblity here</a>
            </p>
          {% endblock %}

          <hr class="divider divider--pumice divider--keyline" />

        </div>
      </div>
    </div>
  </div>

  {% if exhibition.video %}
    <div class="row bg-black {{ {s:2} | spacingClasses({padding: ['top'], margin: ['bottom']}) }} {{ {s:10} | spacingClasses({padding: ['bottom']}) }}">
      <div class="container">
        <div class="grid">
          <div class="{{ {s:12, m:8, shiftM:2, l:8, shiftL:2, xl:6, shiftXl:3} | gridClasses }}">
            {% if exhibition.video.value.title %}
              <h2 class="{{ {s:'WB6'} | fontClasses }} font-white">{{ exhibition.video.value.title }}</h2>
            {% endif %}
            {% componentV2 'iframed-video', exhibition.video.value %}
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {% if exhibition.imageGallery %}
    <div class="row {{ {s:2} | spacingClasses({padding: ['top'], margin: ['bottom']}) }} {{ {s:10} | spacingClasses({padding: ['bottom']}) }}">
      <div class="container">
        {% component 'image-gallery', { imageGallery: exhibition.imageGallery.value, id: 'article-body-image-gallery--' + exhibition.id } %}
      </div>
    </div>
  {% endif %}
</article>
{% endblock %}

